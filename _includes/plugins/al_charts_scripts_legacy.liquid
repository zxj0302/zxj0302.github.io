{% if page.mermaid and page.mermaid.enabled %}
  <!-- Mermaid and D3 -->
  <script
    defer
    src="{{ site.third_party_libraries.mermaid.url.js }}"
    integrity="{{ site.third_party_libraries.mermaid.integrity.js }}"
    crossorigin="anonymous"
  ></script>
  {% if page.mermaid.zoomable %}
    <script
      defer
      src="{{ site.third_party_libraries.d3.url.js }}"
      integrity="{{ site.third_party_libraries.d3.integrity.js }}"
      crossorigin="anonymous"
    ></script>
  {% endif %}
  <script defer src="{{ '/assets/js/mermaid-setup.js' | relative_url | bust_file_cache }}" type="text/javascript"></script>
{% endif %}

{% if page.code_diff %}
  <!-- Diff2HTML -->
  <!-- diff2html doesn't go well with Bootstrap Table -->
  <script
    src="{{ site.third_party_libraries.diff2html.url.js }}"
    integrity="{{ site.third_party_libraries.diff2html.integrity.js }}"
    crossorigin="anonymous"
  ></script>
  <script defer src="{{ '/assets/js/diff2html-setup.js' | relative_url | bust_file_cache }}" type="text/javascript"></script>
{% endif %}

{% if page.map %}
  <!-- Leaflet -->
  <script
    src="{{ site.third_party_libraries.leaflet.url.js }}"
    integrity="{{ site.third_party_libraries.leaflet.integrity.js }}"
    crossorigin="anonymous"
  ></script>
  <script defer src="{{ '/assets/js/leaflet-setup.js' | relative_url | bust_file_cache }}" type="text/javascript"></script>
{% endif %}

{% if page.chart and page.chart.chartjs %}
  <!-- Chart.js -->
  <script
    defer
    src="{{ site.third_party_libraries.chartjs.url.js }}"
    integrity="{{ site.third_party_libraries.chartjs.integrity.js }}"
    crossorigin="anonymous"
  ></script>
  <script defer src="{{ '/assets/js/chartjs-setup.js' | relative_url | bust_file_cache }}" type="text/javascript"></script>
{% endif %}

{% if page.chart and page.chart.echarts %}
  <!-- ECharts -->
  <script
    src="{{ site.third_party_libraries.echarts.url.js.library }}"
    integrity="{{ site.third_party_libraries.echarts.integrity.js.library }}"
    crossorigin="anonymous"
  ></script>
  {% if site.enable_darkmode %}
    <script
      src="{{ site.third_party_libraries.echarts.url.js.dark_theme }}"
      integrity="{{ site.third_party_libraries.echarts.integrity.js.dark_theme }}"
      crossorigin="anonymous"
    ></script>
  {% endif %}
  <script defer src="{{ '/assets/js/echarts-setup.js' | relative_url | bust_file_cache }}" type="text/javascript"></script>
{% endif %}

{% if page.chart and page.chart.plotly %}
  <!-- Plotly -->
  <script
    defer
    src="{{ site.third_party_libraries.plotly.url.js }}"
    integrity="{{ site.third_party_libraries.plotly.integrity.js }}"
    crossorigin="anonymous"
  ></script>
  <script defer src="{{ '/assets/js/plotly-setup.js' | relative_url | bust_file_cache }}" type="text/javascript"></script>
{% endif %}

{% if page.chart and page.chart.vega_lite %}
  <!-- Vega -->
  <script
    defer
    src="{{ site.third_party_libraries.vega.url.js }}"
    integrity="{{ site.third_party_libraries.vega.integrity.js }}"
    crossorigin="anonymous"
  ></script>
  <script
    defer
    src="{{ site.third_party_libraries.vega-lite.url.js }}"
    integrity="{{ site.third_party_libraries.vega-lite.integrity.js }}"
    crossorigin="anonymous"
  ></script>
  <script
    defer
    src="{{ site.third_party_libraries.vega-embed.url.js }}"
    integrity="{{ site.third_party_libraries.vega-embed.integrity.js }}"
    crossorigin="anonymous"
  ></script>
  <script defer src="{{ '/assets/js/vega-setup.js' | relative_url | bust_file_cache }}" type="text/javascript"></script>
{% endif %}
